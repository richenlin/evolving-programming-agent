# 简化模式 (Simple Mode)

适用于问题修复、代码重构、代码审查场景。

## 状态文件

| 文件 | 用途 |
|------|------|
| `progress.txt` | 会话进度日志 |

## 工作流程

### 1. 状态检查（每次会话必须首先执行）

**目的**: 了解上一步完成情况和遗留问题

```
检查 progress.txt 是否存在
    ├─ 存在 → 执行状态检查
    └─ 不存在 → 创建新的 progress.txt
```

**检查内容**:
```bash
# 读取进度日志 - 了解历史修复记录、遗留问题
cat progress.txt
```

**检查后行动**:
- 从"下一步"继续未完成的工作
- 优先处理"遇到的问题"中的遗留项
- 了解历史修复方案，避免重复踩坑

### 2. 问题修复循环

```
状态检查 → 理解问题
         → 阅读相关代码 + 复现问题
         → 分析根本原因（非表面症状）
         → 制定方案（多方案时说明取舍）
         → 实施修改（最小化改动）
         → 验证测试（确保修复有效无副作用）
         → 状态更新
         → git commit
```

### 3. 状态更新（每个步骤完成后必须执行）

**目的**: 给下一步做指引

**progress.txt 更新内容**:
```
================================================================================
SESSION: YYYY-MM-DD HH:MM
================================================================================
## 本次完成
- [x] 具体修复/重构的内容描述

## 当前状态
- 问题是否完全解决
- 代码当前状态

## 下一步
- 下个会话应该做什么（具体、可执行）
- 如果问题未完全解决，说明剩余工作

## 遇到的问题
- 问题描述 + 临时方案或待解决标记
- 修复过程中发现的其他问题
```

**更新时机**:
- 每完成一个修复/重构任务
- 每次 git commit 前
- 会话结束前

## 测试验证

| 类型 | 方法 |
|------|------|
| 编译 | 运行构建命令 |
| 单测 | 运行现有测试 |
| 功能 | curl/手动验证 |
| 回归 | 确认未破坏现有功能 |

## 错误处理

1. 分析失败原因
2. 尝试不同方案（最多3次）
3. 连续失败：回退 + 记录到 progress.txt + 报告用户
