{
  "id": "experience-koatty-多协议服务配置-51e893ba",
  "category": "experience",
  "name": "Koatty 多协议服务配置",
  "triggers": [
    "graphql",
    "grpc",
    "koa",
    "koatty",
    "typescript",
    "websocket",
    "多协议服务配置"
  ],
  "content": {
    "description": "在 Koatty 中同时运行 HTTP/gRPC/WebSocket/GraphQL 多种协议",
    "context": "需要同时提供 REST API 和 gRPC 服务的场景",
    "solution": "在 config/config.ts 中配置:\nserver: {\n  hostname: \"127.0.0.1\",\n  port: 3000,\n  protocol: [\"http\", \"grpc\"], // 多协议数组\n}\n在 config/router.ts 中配置协议特定选项",
    "pitfalls": [
      "GraphQL 需要配置 schemaFile",
      "gRPC 需要配置 protoFile",
      "HTTP/2 需要 SSL 证书"
    ],
    "related_tech": [
      "koatty",
      "grpc",
      "graphql",
      "websocket",
      "koa",
      "typescript"
    ]
  },
  "sources": [
    "https://github.com/Koatty/koatty"
  ],
  "tags": [],
  "created_at": "2026-01-23T21:24:42.979221",
  "updated_at": "2026-01-23T21:24:42.979221",
  "usage_count": 0,
  "effectiveness": 0.5
}